<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Online Monitoring Duren Medan</title>
    <style>
      #map {
        height: 100%; //100% tinggi
      }
      html, body {
        height: 100%; 
        margin: 0;
        padding: 0; //100% tinggi, tanpa margin, tanpa geser padding
      }
      #floating-panel {
        background-color: #fff;
        border: 1px solid #999;
        right: 0%;
        padding: 0px;
        position: absolute;
        top: 50px;
        z-index: 1;
      }
	  #hasilsimulasi {
        background-color: #fff;
        border: 1px solid #999;
        right: 0%;
        padding: 0px;
        position: absolute;
        bottom: -43%;
		visibility: hidden;
      }
	  #tampilanawal {
        right: 0%;
        padding: 0px;
        position: absolute;
        top: 23px;
      }
      #show-panel {
        right: 0%;
        padding: 0px;
        position: absolute;
        top: 0%;
		visibility: hidden;
		z-index: 1;
      }
	  #hide-panel {
        right: 0%;
        padding: 0px;
        position: absolute;
        top: 0%;
		z-index: 1;
      }
	    table {border-collapse:collapse; width:10px;}
		table td {border:solid 1px #fab; width:10px; word-wrap:break-word;}
    </style>
  </head>

  <body onload="waktu()">
	<div id="hide-panel" align="right">
	<img width=12% height=12% title="Sembunyikan Panel" src=https://raw.githubusercontent.com/durenmedan/durenmedan/master/sembunyikan.png onclick="toggleFloatingPanel()"/><img width=12% height=12% id="lokasisaya" title="Lokasi Saya" src=https://raw.githubusercontent.com/durenmedan/durenmedan/master/lokasisaya.png><img width=12% height=12% title="Tampilan Awal" src=https://raw.githubusercontent.com/durenmedan/durenmedan/master/tampilanawal.png onclick="initMap()"/></br></br>
	</div>
	<div id="show-panel" align="right">
		<img width=12% height=12% title="Tampilkan Panel" src=https://raw.githubusercontent.com/durenmedan/durenmedan/master/tampilkan.png onclick="toggleFloatingPanel()"/><img width=12% height=12% id="lokasisaya" title="Lokasi Saya" src=https://raw.githubusercontent.com/durenmedan/durenmedan/master/lokasisaya.png><img width=12% height=12% title="Tampilan Awal" src=https://raw.githubusercontent.com/durenmedan/durenmedan/master/tampilanawal.png onclick="initMap()"/></br></br>
	</div>
	<div id="tampilanawal">
	</div>
    <div id="floating-panel"> 
	  <b>Panel Kendali</b></br>
	  	<div id="waktu"></div>
	  	<font size="2">Pilih Lokasi 
		<select id="pilihlokasikejadian" name="pilihlokasi" onChange="sesuaikan(this.value)">
			<option value="smarun">SM Arun</option>
			<option value="lbcv1">LBCV 1</option>
			<option value="lbcv2">LBCV 2</option>
			<option value="lbcv3">LBCV 3</option>
			<option value="lbcv4">LBCV 4</option>
			<option value="lbcv5">LBCV 5</option>
			<option value="lbcv6">LBCV 6</option>
			<option value="lbcv7">LBCV 7</option>
			<option value="skgrpa">SKG Rantau Panjang</option>
			<option value="lbcv8">LBCV 8</option>
			<option value="lbcv9">LBCV 9</option>
			<option value="lbcv10">LBCV 10</option>
			<option value="lbcv11">LBCV 11</option>
			<option value="lbcv12">LBCV 12</option>
			<option value="lbcv13">LBCV 13</option>
			<option value="lbcv14">LBCV 14</option>
			<option value="lbcv15">LBCV 15</option>
			<option value="skgpbr" selected="selected">SKG Pangkalan Brandan</option>
			<option value="lbcv16">LBCV 16</option>
			<option value="lbcv17">LBCV 17</option>
			<option value="lbcv18">LBCV 18</option>
			<option value="lbcv19">LBCV 19</option>
			<option value="smblw">SM Belawan</option>
			<option value="manualinput">Manual Input Koordinat</option></font>
		</select></br>
	  <b><font size="2">Posisi Kejadian Kebakaran</font><div id="masukkan"></b><div id="namadaerah"></div></div>
	  <font size="2"><input type="text" id="lintang" value="4.017443" size="1"> Lintang Utara, </font><font size="2"><input type="text" id="bujur" value="98.275883" size="1"> Bujur Barat</font></br></br>
	  <b><font size="2">Kondisi Lingkungan</font></b></br>
	  <font size="2">Air Quality Index <input type="text" id="aqiindex" size="1"></input> US AQI</font></br>
	  <font size="2">Kecepatan Angin <input type="text" id="kecepatanangin" value=" " size="4"> m/s</font></br>
	  <font size="2">Arah Angin <input type="text" id="arahangin" value=" " size="1"> °</font></br>
	  <font size="2">Kelembapan <input type="text" id="kelembapan" value=" " size="1"> %</font></br>
	  <font size="2">Suhu Udara <input type="text" id="suhuudara" value=" " size="1"> °C</font></br>
	  <font size="2">Cuaca <input type="text" id="cuaca" value=" " size="10"></font></br>
	  </br> 
	  <font size="2"><b>Data Penyaluran</b></br>
	  Tekanan : <input type="text" id="tekanan" value="354" size="1"> psig</br>
	  Suhu Gas : <input type="text" id="suhugas" value="9" size="1"> °F</br>
	  Flowrate : <input type="text" id="flowrate" value="150" size="1"> MMSCFD</br></br>
	  <center><button id="simulasikan" onclick="simulasi()">Simulasikan</button></center></font>
	  <div id="hasilsimulasi">
		<font size="2"><table style="width:239px">
		<tr>
			<th>Zona</th>
			<th>Merah</th>
			<th>Oranye</th>
			<th>Kuning</th>
		</tr>
		<tr>
			<td>Radius (meter)</td>
			<td>152</td>
			<td>216</td>
			<td>336</td>
		</tr>
		<tr>
			<td>Daya ledak (kW/m²)</td>
			<td>10</td>
			<td>5</td>
			<td>2</td>
		</tr>
				<tr width="1">
			<td>Dampak</td>
			<td>Berpotensi korban jiwa dalam 60 detik</td>
			<td>Luka bakar parah dalam 60 detik</td>
			<td>Luka bakar dalam 60 detik</td>
		</tr>
		</table></font></div>
    </div>

    <div id="map"></div>
    <script>
	//senarai konstanta parameter
	var flowratearun = 120;
	var flowratemedco = 50;
	var tekananarun = 620;
	var tekananrpa = 540;
	var tekananpbr = 450;
	//pengaturan icon simbol
	var lbcvicon = 'https://raw.githubusercontent.com/durenmedan/durenmedan/master/lbcvicon.png';
	var manualicon = 'https://raw.githubusercontent.com/durenmedan/durenmedan/master/manual.png';
	var smicon = 'https://raw.githubusercontent.com/durenmedan/durenmedan/master/smicon.png';
	var skgicon = 'https://raw.githubusercontent.com/durenmedan/durenmedan/master/skgicon.png';
	//konstanta lokasi
	var senarailokasi = [
          {
            position: {lat:5.221634, lng:97.077584}, //SM Arun, no urut 0
            type: 'sm',
			title: 'SM Arun',
			icon: smicon,
			tekanan: tekananarun,
			suhugas: 75,
			flowrate: flowratearun
          }, {
            position: {lat:5.09859, lng:97.138503}, //LBCV 1, no urut 1
			type: 'lbcv',
			title: 'LBCV 1 - KP015',
			icon: lbcvicon,
			tekanan: tekananarun-10,
			suhugas: 75,
			flowrate: flowratearun
          }, {
		    position: {lat:5.0511286, lng:97.2553603}, //LBCV 2, no urut 2
			type: 'lbcv',
			title: 'LBCV 2 - KP032',
			icon: lbcvicon,
			tekanan: tekananarun-20,
			suhugas: 75,
			flowrate: flowratearun
          }, {
			position: {lat:4.9491693, lng:97.3376748}, //LBCV 3, no urut 3
			type: 'lbcv',
			title: 'LBCV 3 - KP048',
			icon: lbcvicon,
			tekanan: tekananarun-30,
			suhugas: 75,
			flowrate: flowratearun
          }, {
            position: {lat:4.8682137, lng:97.4479687}, //LBCV 4, no urut 4
			type: 'lbcv',
			title: 'LBCV 4 - KP064',
			icon: lbcvicon,
			tekanan: tekananarun-40,
			suhugas: 75,
			flowrate: flowratearun
          }, {
            position: {lat:4.899277, lng:97.554188}, //LBCV 5, no urut 5
			type: 'lbcv',
			title: 'LBCV 5 - KP081',
			icon: lbcvicon,
			tekanan: tekananarun-50,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {
            position: {lat:4.8323902, lng:97.6078731}, //LBCV 6, no urut 6
			type: 'lbcv',
			title: 'LBCV 6 - KP097',
			icon: lbcvicon,
			tekanan: tekananarun-60,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {
            position: {lat:4.835706, lng:97.708989}, //LBCV 7, no urut 7
			type: 'lbcv',
			title: 'LBCV 7 - KP113',
			icon: lbcvicon,
			tekanan: tekananarun-70,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {	
            position: {lat:4.763970, lng:97.795643}, //SKG RPA, no urut 8
			type: 'skg',
			title: 'SKG Rantau Panjang - KP128',
			icon: skgicon,
			tekanan: tekananrpa,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {		  
            position: {lat:4.665926, lng:97.837022}, //LBCV 8, no urut 9
            type: 'lbcv',
			title: 'LBCV 8 - KP144',
			icon: lbcvicon,
			tekanan: tekananrpa-10,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {
            position: {lat:4.578443, lng:97.889069}, //LBCV 9, no urut 10
            type: 'lbcv',
			title: 'LBCV 9 - KP157',
			icon: lbcvicon,
			tekanan: tekananrpa-20,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {
            position: {lat:4.4583309, lng:97.9258811}, //LBCV 10, no urut 11
            type: 'lbcv',
			title: 'LBCV 10 - KP174',
			icon: lbcvicon,
			tekanan: tekananrpa-30,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {
            position: {lat:4.37855, lng:98.024541}, //LBCV 11, no urut 12
            type: 'lbcv',
			title: 'LBCV 11 - KP192',
			icon: lbcvicon,
			tekanan: tekananrpa-40,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {
            position: {lat:4.29723, lng:98.08454}, //LBCV 12, no urut 13
            type: 'lbcv',
			title: 'LBCV 12 - KP208',
			icon: lbcvicon,
			tekanan: tekananrpa-50,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {
            position: {lat:4.181811, lng:98.043201}, //LBCV 13, no urut 14
            type: 'lbcv',
			title: 'LBCV 13 - KP224',
			icon: lbcvicon,
			tekanan: tekananrpa-60,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {
            position: {lat:4.06212, lng:98.1121}, //LBCV 14, no urut 15
            type: 'lbcv',
			title: 'LBCV 14 - KP240',
			icon: lbcvicon,
			tekanan: tekananrpa-70,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {
            position: {lat:4.03305, lng:98.2082}, //LBCV 15, no urut 16
            type: 'lbcv',
			title: 'LBCV 15 - KP255',
			icon: lbcvicon,
			tekanan: tekananrpa-80,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }, {
            position: {lat:4.017443, lng:98.275883}, //SKG PBR, no urut 17
            type: 'skg',
			title: 'SKG Pangkalan Brandan - KP266',
			icon: skgicon,
			tekanan: tekananpbr,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
		  }, {
            position: {lat:3.8941479, lng:98.3220255}, //LBCV 16, no urut 18
            type: 'lbcv',
			title: 'LBCV 16 - KP282',
			icon: lbcvicon,
			tekanan: tekananpbr-10,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          },{
            position: {lat:3.778708, lng:98.415492}, //LBCV 17, no urut 19
            type: 'lbcv',
			title: 'LBCV 17 - KP299',
			icon: lbcvicon,
			tekanan: tekananpbr-20,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          },{
            position: {lat:3.7435247, lng:98.4966937}, //LBCV 18, no urut 20
            type: 'lbcv',
			title: 'LBCV 18 - KP314',
			icon: lbcvicon,
			tekanan: tekananpbr-30,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          },{
            position: {lat:3.743714, lng:98.538554}, //LBCV 19, no urut 21
            type: 'lbcv',
			title: 'LBCV 19 - KP319',
			icon: lbcvicon,
			tekanan: tekananpbr-40,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          },{		  
            position: {lat:3.773384, lng:98.671206}, //SM Belawan, no urut 22
            type: 'sm',
			title: 'SM Belawan - KP334',
			icon: smicon,
			tekanan: tekananpbr-50,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          },{		  
            position: {lat:3.773384, lng:98.671206}, //SM Belawan, no urut 23
            type: 'sm',
			title: 'SM Belawan - KP334',
			icon: smicon,
			tekanan: tekananpbr-50,
			suhugas: 75,
			flowrate: flowratearun+flowratemedco
          }  
        ];
		
function animateMapZoomTo(map, targetZoom) {
    var currentZoom = arguments[2] || map.getZoom();
    if (currentZoom != targetZoom) {
        google.maps.event.addListenerOnce(map, 'zoom_changed', function (event) {
            animateMapZoomTo(map, targetZoom, currentZoom + (targetZoom > currentZoom ? 1 : -1));
        });
        setTimeout(function(){ map.setZoom(currentZoom) }, 300);
    }
}

	function cariterdekat(lat,lng){
	var nilai=100;
	var min;
	for(var i = 0; i < 24; i++){
		var jarakkuadrat = Math.pow((detillokasi(i)[3]-lat),2)+Math.pow((detillokasi(i)[4]-lng),2);
		if (jarakkuadrat < nilai) {nilai = jarakkuadrat; min = i;}
		else{}
	}
	return min;
	}
	function sesuaikan(pilihan) {
	tekanan.value=detillokasi(nomorlokasi(pilihan))[0];//detillokasi(nomorlokasi(pilihan))[0];
	suhugas.value=detillokasi(nomorlokasi(pilihan))[1];
	flowrate.value=detillokasi(nomorlokasi(pilihan))[2];
	lintang.value=detillokasi(nomorlokasi(pilihan))[3];
	bujur.value=detillokasi(nomorlokasi(pilihan))[4];
	aqi(); namalokasi("namadaerah",lintang.value,bujur.value);
}
	
		function nomorlokasi(opsi) {
		switch(opsi) {
			case "smarun": return 0; break;
			case "lbcv1": return 1; break;
			case "lbcv2": return 2; break;
			case "lbcv3": return 3; break;
			case "lbcv4": return 4; break;
			case "lbcv5": return 5; break;
			case "lbcv6": return 6;	break;
			case "lbcv7": return 7;	break;
			case "skgrpa": return 8; break;
			case "lbcv8": return 9; break;
			case "lbcv9": return 10; break;
			case "lbcv10": return 11; break;
			case "lbcv11": return 12; break;
			case "lbcv12": return 13; break;
			case "lbcv13": return 14; break;
			case "lbcv14": return 15; break;
			case "lbcv15": return 16; break;
			case "skgpbr": return 17; break;
			case "lbcv16": return 18; break;
			case "lbcv17": return 19; break;
			case "lbcv18": return 20; break;
			case "lbcv19": return 21; break;
			case "smblw": return 22; break;
			case "manualinput": document.getElementById('masukkan').innerHTML = "<font size=2>(masukkan koordinat)</font>"; return; break;
			case "manualpencarian": return 24; break;
			default: return 17;
		}
		}
		function detillokasi(nourut){	
		var tekanan,suhugas,flowrate,lintang,bujur;
			tekanan=senarailokasi[nourut].tekanan;
			suhugas=senarailokasi[nourut].suhugas;
			flowrate=senarailokasi[nourut].flowrate;
			lintang=senarailokasi[nourut].position.lat;
			bujur=senarailokasi[nourut].position.lng;
		mn = new google.maps.LatLng(lintang,bujur);
		marker1.setPosition(mn);
		return [tekanan,suhugas,flowrate,lintang,bujur];
		}
			
	//tarik data openweather API
    var zonamerah, zonaoranye, zonakuning;
	//fungsiwaktu
       function initMap() {
	   aqi(); namalokasi("namadaerah",lintang.value,bujur.value);
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 18, disableDefaultUI: false,
          center: {lat: 4.017443, lng: 98.275883}, //lokasi awal SKG PBR
          mapTypeId: 'hybrid',  //citra satelit disertai batas, nama tempat, dll
		  zoomControl: true,
		  zoomControlOptions: {
              position: google.maps.ControlPosition.LEFT_TOP
          },		  
          fullscreenControl: true,
		  fullscreenControlOptions: {
              position: google.maps.ControlPosition.LEFT_TOP
          },		  
		  mapTypeControl: true,
          mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
            mapTypeIds: ['roadmap', 'terrain', 'satellite', 'hybrid']
	      },
		  streetViewControl: true,
		  streetViewControlOptions: {
              position: google.maps.ControlPosition.LEFT_TOP
          }
        });
	//lingkaran potensi dampak
		var lingkaranmerah = new google.maps.Circle({
            strokeColor: '#FF0000',
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: '#FF0000',
            fillOpacity: 0.8,
            map: map, 
            center: {lat: 4.017443, lng: 98.275883},
            radius: 0
          });
		var lingkaranoranye = new google.maps.Circle({
            strokeColor: '#FF9900',
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: '#FF9900',
            fillOpacity: 0.4,
            map: map,
            center: {lat: 4.017443, lng: 98.275883},
            radius: 0
          });
		var lingkarankuning = new google.maps.Circle({
            strokeColor: '#FFFF00',
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: '#FFFF00',
            fillOpacity: 0.2,
            map: map,
            center: {lat: 4.017443, lng: 98.275883},
            radius: 0
          });
		  zonamerah = lingkaranmerah;
		  zonaoranye = lingkaranoranye;
		  zonakuning = lingkarankuning;

		

		//membuat penanda senarai lokasi
        senarailokasi.forEach(function(feature) {
          var markercoba = new google.maps.Marker({
            position: feature.position,
            icon: feature.icon,
            map: map,
			title: feature.title
          });
        });

        marker1 = new google.maps.Marker({
          map: map,
		  icon: manualicon,
          draggable: true,
          animation: google.maps.Animation.DROP,
          position: {lat: 4.017443 , lng: 98.275883}
        });
        marker1.addListener('click', toggleBounce); //animasi mantul
		
		
		
	document.getElementById("simulasikan").addEventListener("click", function(){
		animateMapZoomTo(map,16);
		map.setCenter(marker1.getPosition());
	});
	
	document.getElementById("pilihlokasikejadian").addEventListener("click", function(){
		animateMapZoomTo(map,8);
		map.setCenter(marker1.getPosition());
	});
	var infoWindow = new google.maps.InfoWindow;
	document.getElementById("lokasisaya").addEventListener("click", function(){
		lokasisaya(infoWindow,map);
	});

		//external KML url
		var ctaLayer = new google.maps.KmlLayer({
          url: 'https://raw.githubusercontent.com/durenmedan/durenmedan/master/ctaq.kml',
          map: map
        });
      }
	  function lokasisaya(infoWindow,map){
	  var infoWindow = new google.maps.InfoWindow;
          if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
			namalokasi("gps",lat,lng);
            infoWindow.setPosition(pos);
            infoWindow.setContent('Lokasi Saya</br>'+'<div id="gps"></div>'+lat+','+lng);
            infoWindow.open(map);
          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }
	  function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                              'Layanan GPS gagal' :
                              'Peramban Anda tidak mendukung GPS');
        infoWindow.open(map);
      }

		function waktu() {
			var today = new Date();
			var dd = today.getDate();
			var mm = today.getMonth()+1;
			var yy = today.getFullYear();
			var h = today.getHours();
			var m = today.getMinutes();
			var s = today.getSeconds();
			//dd = checkTime(dd);
			mm = checkTime(mm);
			h = checkTime(h);
			m = checkTime(m);
			s = checkTime(s);
			var namabulan = ["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];
			document.getElementById('waktu').innerHTML = dd+" "+namabulan[mm]+" "+yy+" "+h + ":" + m + ":" + s + " WIB";
			lat = marker1.getPosition().lat();
			lng = marker1.getPosition().lng();
			var t = setTimeout(waktu, 1000);
		}
		function checkTime(i) {
		if (i < 10) {i = "0" + i};  // menambah digit 0 untuk satuan
		return i;
		}
      function toggleBounce() {
        if (marker1.getAnimation() !== null) {
          marker1.setAnimation(null);
        } else {
          marker1.setAnimation(google.maps.Animation.BOUNCE);
        }
      }

	  //tampilan panel kendali
	  function toggleFloatingPanel() {
        if(document.getElementById("floating-panel").style.visibility !== "hidden"){
			document.getElementById("floating-panel").style.visibility = "hidden";
			document.getElementById("hasilsimulasi").style.visibility = "hidden";
			document.getElementById("hide-panel").style.visibility = "hidden";
			document.getElementById("show-panel").style.visibility = "visible";
			
		} else {
			document.getElementById("floating-panel").style.visibility = "visible";
			document.getElementById("hide-panel").style.visibility = "visible";
			document.getElementById("show-panel").style.visibility = "hidden";
		}
      }

      function simulasi() {
		zonakuning.set('radius', 336);
		zonakuning.set('center', marker1.position);
		zonaoranye.set('radius', 216);
		zonaoranye.set('center', marker1.position);
		zonamerah.set('radius', 152);
		zonamerah.set('center', marker1.position);
		document.getElementById("hasilsimulasi").style.visibility = "visible";
      }


function aqi(){  
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
  if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
    var myObj = JSON.parse(xmlhttp.responseText);
	aqiindex.value = myObj.data[0].aqi;
	kecepatanangin.value = myObj.data[0].wind_spd;
	arahangin.value = myObj.data[0].wind_dir;
	kelembapan.value = myObj.data[0].rh;
	suhuudara.value = myObj.data[0].temp;
	cuaca.value = myObj.data[0].weather.description;
  }
};
var aa = "https://api.weatherbit.io/v2.0/current?lat="+lintang.value+"&lon="+bujur.value+"&key=b57ca6ae2ee04e68ba19f3a6299a6a3e&lang=id";
xmlhttp.open('GET', aa, true);
xmlhttp.send();
}

function namalokasi(nama,lintang,bujur){
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
  if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
    var myObj = JSON.parse(xmlhttp.responseText);
	document.getElementById(nama).innerHTML = myObj.results[0].address_components[1].long_name+", "+myObj.results[0].address_components[2].long_name+"</br>"+myObj.results[0].address_components[3].long_name+"</br>"+myObj.results[0].address_components[4].long_name+" "+myObj.results[0].address_components[6].long_name+", "+myObj.results[0].address_components[5].long_name;
  }
};
var aa = "https://maps.googleapis.com/maps/api/geocode/json?latlng="+lintang+","+bujur+"&key=AIzaSyAx74v7Xf0TNQqF2wSUB5r-oEGBfnlls1Q";
xmlhttp.open('GET', aa, true);
xmlhttp.send();
}
    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAx74v7Xf0TNQqF2wSUB5r-oEGBfnlls1Q&libraries=visualization,places,geometry,drawing&callback=initMap">
    </script>
  </body>
</html>
